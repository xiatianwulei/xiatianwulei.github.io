---
layout:     post
title:      Swift é«˜çº§å‡½æ•°
subtitle:   
date:       2025-12-05
author:     å¤å¤©æ— æ³ª
header-img: img/post-bg-digital-native.jpg?raw=true
catalog: true
tags:
    - Swift
---

ğŸ“˜ Swift é«˜çº§å‡½æ•°é€ŸæŸ¥æ‰‹å†Œ
Swift ä¸­å¸¸ç”¨çš„é«˜é˜¶å‡½æ•°åŒ…æ‹¬ï¼šmap / filter / reduce / compactMap / flatMap / sorted / contains / first / firstIndex ç­‰ã€‚æœ¬æ‰‹å†Œæä¾›æœ€ç®€æ˜ç¤ºä¾‹ï¼Œä¾¿äºå¼€å‘ä¸­å¿«é€ŸæŸ¥é˜…ã€‚

1. map â€” æ˜ å°„ï¼ˆå¯¹æ¯ä¸ªå…ƒç´ åšè½¬æ¢ï¼‰

    ```
    let numbers = [1, 2, 3]
    let strings = numbers.map { "æ•°å­—\($0)" }
    // ["æ•°å­—1", "æ•°å­—2", "æ•°å­—3"]
    ```

2. filter â€” è¿‡æ»¤ï¼ˆç­›é€‰å…ƒç´ ï¼‰
    ```
    let numbers = [1, 2, 3, 4, 5]
    let evens = numbers.filter { $0 % 2 == 0 }
    // [2, 4]
    ```
3. reduce â€” æ±‡æ€»ï¼ˆå°†æ•°ç»„åˆæˆä¸ºä¸€ä¸ªå€¼ï¼‰
    ```
    let numbers = [1, 2, 3]
    let sum = numbers.reduce(0) { $0 + $1 }
    // 6
    ```    
4. compactMap â€” æ˜ å°„å¹¶è‡ªåŠ¨ç§»é™¤ nil
    ```
    let inputs = ["1", "2", "a", "3"]
    let numbers = inputs.compactMap { Int($0) }
    // [1, 2, 3]
    ```    
5. flatMap â€” æ‰å¹³åŒ–ï¼ˆå±•å¼€å¤šç»´æ•°ç»„ï¼‰
    ```
    let arr = [[1, 2], [3, 4]]
    let flat = arr.flatMap { $0 }
    // [1, 2, 3, 4]
    ```
6. sorted â€” æ’åº
    ```
    let arr = [3, 1, 2]
    let sortedArr = arr.sorted { $0 < $1 }
    // [1, 2, 3]
    ```
7. contains(where:) â€” åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„å…ƒç´ 
    ```
    let arr = [1, 3, 5]
    let hasEven = arr.contains { $0 % 2 == 0 }
    // false
    ```
   
8. éå†æ•°ç»„è·å–ç´¢å¼•å€¼
    ```
        let gradeEquityListBR = starLevelMainVM.gradeEquityListBR.value
        let inputGradeId = gradeGrowthValueBR.gradeId ?? 0
        let resultIndex = gradeEquityListBR?.gradeEquityList?.firstIndex { $0.gradeId == inputGradeId } ?? 0
    ```
9. éå†æ•°ç»„è·å–ç´¢å¼•å€¼
    ```
    guard let entity = entity else { return  }
        if let (index, match) = entity.gradeEquityList?.enumerated()
                .first(where: { $0.element.gradeId == starLevel?.gradeId }) {
                print("ç´¢å¼•ï¼š\(index)")
                print("å…ƒç´ ï¼š\(match)")
            }
    ```
10. å–å‡ºæ•°ç»„é‡Œé¢çš„å…ƒç´ ç»„æˆä¸€ä¸ªæ–°çš„æ•°ç»„

    ```
    let names = entity?.gradeEquityList?.compactMap { $0.gradeName } ?? []  
    ```
    
11. å–å‡ºæ•°ç»„é‡Œé¢çš„å…ƒç´ ç»„æˆä¸€ä¸ªæ–°çš„æ•°ç»„

    ```
    let totalCount: Int = filteredList.reduce(into: 0) { (result, item) in
    // é—­åŒ…å‚æ•°ï¼š
    // - resultï¼šç´¯åŠ çš„ä¸­é—´ç»“æœï¼ˆåˆå§‹å€¼æ˜¯ 0ï¼Œæ¯æ¬¡å¾ªç¯ä¼šæ›´æ–°ï¼‰
    // - itemï¼šå½“å‰éå†åˆ°çš„ filteredList ä¸­çš„å…ƒç´ ï¼ˆPrizeVo ç±»å‹ï¼‰
    let amount = item.amount ?? 0 // å¦‚æœ amount æ˜¯ nilï¼Œå°±ç”¨ 0 ä»£æ›¿
    result = result + amount // æŠŠå½“å‰ item çš„ amount åŠ åˆ° result ä¸­
    }
    ```
    
12. å–å‡ºæ•°ç»„é‡Œé¢çš„å…ƒç´ ç»„æˆä¸€ä¸ªæ–°çš„æ•°ç»„

    ```
    let filteredList: [PrizeVo] = prizeVoList.filter { (item) -> Bool in
    // é—­åŒ…å‚æ•°ï¼šitem æ˜¯æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ˆPrizeVo ç±»å‹ï¼‰
    // é€»è¾‘ï¼šåˆ¤æ–­ item çš„ prizeType æ˜¯å¦ä¸º 11ï¼ˆå¦‚æœä¸º nil åˆ™é»˜è®¤ 0ï¼‰
    let type = item.prizeType ?? 0 // å¦‚æœ prizeType æ˜¯ nilï¼Œå°±ç”¨ 0 ä»£æ›¿
    return type == 11 // è¿”å› Bool ç»“æœï¼Œtrue åˆ™ä¿ç•™è¯¥å…ƒç´ 
    }
    ```
    
    